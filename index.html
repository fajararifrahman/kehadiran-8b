<!-- Tambahkan ini di akhir tab rekap untuk Statistik -->
<div id="statistik" class="tab">
  <h2><i class="fas fa-chart-pie"></i> Statistik Kehadiran</h2>
  <canvas id="chartKehadiran" width="400" height="200"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
function tampilkanStatistik(dataRekap) {
  const labels = ['Hadir', 'Izin', 'Sakit', 'Alpha'];
  let total = { H: 0, I: 0, S: 0, A: 0 };
  dataRekap.forEach(siswa => {
    siswa.kehadiran.forEach(k => {
      if (k.status === 'H') total.H++;
      else if (k.status === 'I') total.I++;
      else if (k.status === 'S') total.S++;
      else if (k.status === 'A') total.A++;
    });
  });
  const data = {
    labels: labels,
    datasets: [{
      label: 'Total Kehadiran',
      data: [total.H, total.I, total.S, total.A],
      backgroundColor: ['#2ecc71', '#f1c40f', '#3498db', '#e74c3c']
    }]
  };
  const config = {
    type: 'bar',
    data: data,
    options: {
      responsive: true,
      plugins: {
        legend: {
          display: false
        },
        title: {
          display: true,
          text: 'Grafik Statistik Kehadiran'
        }
      }
    }
  };
  new Chart(document.getElementById('chartKehadiran'), config);
}
</script>
